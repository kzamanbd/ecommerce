import os

# Retrieve environment variables
author = os.getenv('AUTHOR_NAME')
branch_name = os.getenv('BRANCH_NAME')
release_notes = os.getenv('RELEASE_NOTES')
build_result = os.getenv('BUILD_RESULT')
build_error = os.getenv('BUILD_ERROR')

# Create the message to be sent
origin = "Development"
if branch_name == "release/prod-vue3x":
    origin = "Production Environment"
elif branch_name == "release/version-vue3x":
    origin = "Development Environment"

# Create the message to be sent
message = f"""
ğŸ‰ **New Release Deployed!**

-------------------

ğŸ‘¤ **Released By:**
{author}

ğŸŒ¿ **Branch Name:**
{branch_name}

-------------------

ğŸŒ **Origin:**
{origin}

-------------------

ğŸ“ **Release Notes:**
{release_notes}

-------------------

ğŸ“ **N.B.:** This message is automatically generated by the CI/CD pipeline to notify you of the latest deployment status. ğŸš€

Thank you! ğŸ™
"""


if build_result == "failure":
    message = f"""
ğŸš¨ **Deployment Alert!**

-------------------

âŒ **Build Failed**

ğŸ‘¤ **Triggered By:**
{author}

-------------------

ğŸŒ¿ **Branch Name:**
{branch_name}

-------------------

ğŸ“„ **Error Details:**
https://github.com/mononsoft/jerp-frontend/actions/runs/{os.getenv('GITHUB_RUN_ID')}

-------------------

ğŸŒ **Origin:**
{origin}

-------------------

ğŸ“ **N.B.:** This message is automatically generated by the CI/CD pipeline to notify you of the latest deployment status. ğŸš€

Please address the issue as soon as possible. Thank you! ğŸ™
"""

# Function to send the message through Skype bot
print(message)
